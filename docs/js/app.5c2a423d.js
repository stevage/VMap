(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],n[i]&&p.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"07bb":function(e,t,a){},1317:function(e,t,a){},"41d0":function(e,t,a){"use strict";var r=a("eb91"),n=a.n(r);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-column vh-100 avenir",attrs:{id:"app"}},[a("div",{staticClass:"flex flex-auto",attrs:{id:"middle"}},[a("div",{staticClass:"br b--light-gray overflow-auto ph2-ns",class:{collapsed:!e.sidebarOpen},attrs:{id:"sidebar"}},[a("div",{staticClass:"container br bg-white b--light-gray overflow-auto ph2 bw2"},[e._m(0),a("div",{staticClass:"cb"}),a("CategoryFilter",{staticClass:"mb4"}),a("FeatureInfo"),a("div",{staticClass:"tc"},[a("div",{staticClass:"dib ba b--dark-blue dim pointer pa3 bg-blue white br1",on:{click:function(t){e.sidebarOpen=!1}}},[e._v("Voir la carte")])]),e._m(1),e._m(2),e._m(3),a("br"),e._m(4)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.sidebarOpen,expression:"!sidebarOpen"}],staticClass:"relative br b--gray bw2",staticStyle:{width:"20px"},attrs:{id:"sidebar-rim"},on:{click:function(t){e.sidebarOpen=!0}}}),a("div",{staticClass:"relative flex-auto",attrs:{id:"map-container"}},[a("Map"),a("div",{staticClass:"absolute bg-white f3 br bt bb br--right br-100 b--magenta bw1 magenta pa1 pointer grow fw8",attrs:{id:"sidebarToggle"},on:{click:function(t){e.sidebarOpen=!e.sidebarOpen}}},[e.sidebarOpen?e._e():a("span",[e._v("→")]),e.sidebarOpen?a("span",[e._v("←")]):e._e()]),a("div",{staticClass:"absolute",attrs:{id:"overlay"}})],1)]),a("div",{staticClass:"bt b--light-gray flex-none",attrs:{id:"bottom"}})])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{staticClass:"pb3 fl",staticStyle:{width:"70px","margin-right":"-5px","margin-left":"-10px"},attrs:{src:"Picto Logo Entraide soignants-72dpi.png"}}),a("h3",{staticClass:"f3",staticStyle:{color:"hsl(220,80%,50%)"}},[e._v("Entraide & soutien aux soignants"),a("br"),a("div",{staticClass:"f7 ttu mt2"},[e._v("COVID-19 en Polynésie")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Ajoute tes souhaits ou tes propositions d’aides via le formulaire en ligne "),a("a",{attrs:{href:"https://framaforms.org/entraide-soutien-aux-soignants-covid-19-1585006214"}},[e._v("ici")]),e._v(".")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"f7"},[e._v("Cette carte est perfectible, n'hésitez pas à "),a("a",{attrs:{href:"urgence.corona@avoscartes.pf"}},[e._v("nous communiquer vos suggestions")]),e._v("!")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"f7"},[e._v("Les données et la localisation affichées sont en accord avec la protection de la vie privée, voir "),a("a",{attrs:{href:"https://www.avoscartes.pf/entraide-soignants-polynesie",target:"_blank"}},[e._v("FAQ")]),e._v(" : pas d'information de contact sans accord explicite et une localisation grossière (à l'échelle du quartier ou de la commune) pour les particuliers.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("a",{attrs:{target:"_blank",href:"https://www.avoscartes.pf/entraide-soignants-polynesie"}},[e._v("Plus d'informations")])])}],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"absolute absolute--fill",attrs:{id:"map"}})},o=[],c=(a("7f7f"),a("5d73")),l=a.n(c),u=a("f499"),d=a.n(u),p=(a("96cf"),a("3b8d")),f=a("e192"),v=a.n(f),m=a("ef12"),h=a.n(m),g=a("7914"),b=new r["a"],_=(a("ac6d"),{data:function(){return{selectedId:-1}},mounted:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return v.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJjazNmNGV5enAwMTF1M2tuejhtc2twcXo5In0.mLPrYIYJ2FiFZ3KMqVIj6w",t=new v.a.Map({container:"map",center:[-149.3296,-17.5697],zoom:10,style:"mapbox://styles/mapbox/streets-v11",hash:"loc"}),h.a.init(t,v.a),window.map=t,window.app.Map=this,t.U.loadImage("Je propose","offer-marker.png"),t.U.loadImage("Je cherche","demand-marker.png"),t.U.loadImage("Je propose-selected","offer-marker-selected.png"),t.U.loadImage("Je cherche-selected","demand-marker-selected.png"),a="2PACX-1vQZHOrhL8jW3t5R7Zr1lsZOg7WlOTvH8_F6kP5dCJn0oRsSwhLWAdM_odXCjFukhjZuPuZAH4Z4Ydy-",e.next=12,Object(g["a"])(a);case 12:r=e.sent,t.U.onLoad(function(){t.U.setFillColor("water","hsl(200,50%,90%)"),t.U.addGeoJSON("points",r,{generateId:!0}),t.U.addSymbol("points-pins","points",s.iconStyle),t.U.hoverPointer("points-pins"),t.U.clickOneLayer(["points-pins"],function(e){b.$emit("select-feature",e.features[0]),n&&t.setFeatureState(n,{selected:!1}),s.selectedId=e.features[0].id,n={source:"points",id:e.features[0].id},t.setFeatureState(n,{selected:!0}),s.$nextTick(function(){return t.U.setLayerStyle("points-pins",s.iconStyle)})},function(e){n&&t.setFeatureState(n,{selected:!1}),s.selectedID=null,b.$emit("select-feature",null)}),t.U.hoverPopup("points-pins",function(e){return"<h3>".concat(e.properties.Categorie,"</h3> ").concat(e.properties.Description,"</h3>")})}),b.$on("filter-change",function(e){var a=["any"],r=!0,n=!1,s=void 0;try{for(var i,o=l()(e);!(r=(i=o.next()).done);r=!0){var c=i.value;if(c.state){var u=!0,p=!1,f=void 0;try{for(var v,m=l()(c.subCategories);!(u=(v=m.next()).done);u=!0){var h=v.value;h.state&&a.push(["==",["get","Sous catégorie, ".concat(c.category.toLowerCase())],h.name])}}catch(g){p=!0,f=g}finally{try{u||null==m.return||m.return()}finally{if(p)throw f}}}else a.push(!1)}}catch(g){n=!0,s=g}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}console.log(d()(a,2)),t.U.setFilter("points-pins",a)});case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:{iconStyle:function(){return console.log("iconstyle",this.selectedId),{iconImage:["case",["==",["get","id"],this.selectedId],["concat",["get","Categorie"],"-selected"],["get","Categorie"]],iconSize:this.iconSize,iconOffset:[0,-60],iconAllowOverlap:!0}},iconSize:function(){return["interpolate",["linear"],["zoom"],9,["case",["==",["get","id"],this.selectedId||null],.25,.125],11,["case",["==",["get","id"],this.selectedId||null],.375,.25]]}}}),y=_,C=a("2877"),w=Object(C["a"])(y,i,o,!1,null,"9fb6eaf8",null);w.options.__file="Map.vue";var x=w.exports,O=function(){var e,t=this,a=t.$createElement,r=t._self._c||a;return t.p?r("div",{staticClass:"ba bw2 br4 b--light-gray pa2 mb5",class:(e={},e[t.p.Type]=!0,e)},[t.imageUrl?r("img",{staticClass:"image",attrs:{src:t.imageUrl}}):t._e(),r("h1",{staticClass:"f3"},[t._v(t._s(t.p.Identification))]),r("div",[r("div",{staticClass:"dib b ba br4 b--light-blue pa2"},[t._v(t._s(t.p.Categorie))])]),r("p",{staticClass:"f6",domProps:{innerHTML:t._s(t.p.Description.replace(/$/gm,"<br>"))}}),r("table",[t.p.Conditions.trim()?r("tr",[r("th",{staticClass:"pa0 tl",attrs:{colspan:"2"}},[t._v("Conditions")])]):t._e(),t.p.Conditions.trim()?r("tr",[r("td",{staticClass:"f6",attrs:{colspan:"2"},domProps:{innerHTML:t._s(t.p.Conditions.replace(/$/gm,"<br>"))}})]):t._e(),t.p.Commentaires.trim()?r("tr",[r("th",{staticClass:"pa0 tl",attrs:{colspan:"2"}},[t._v("Commentaires")])]):t._e(),t.p.Commentaires.trim()?r("tr",{staticClass:"i"},[r("td",{staticClass:"f6",attrs:{colspan:"2"}},[t._v(t._s(t.p.Commentaires))])]):t._e(),t.p.Date.trim()?r("tr",[r("th",[t._v("Date")]),r("td",[t._v(t._s(t.p.Date))])]):t._e(),t.p.Phone?r("tr",[r("th",[t._v("Phone")]),r("td",[t._v(t._s(t.p.Phone))])]):t._e(),t.p.Email?r("tr",[r("th",[t._v("Email")]),r("td",[t._v(t._s(t.p.Email))])]):t._e(),t.p.OtherContact?r("tr",[r("th",[t._v("Contact")]),r("td",[t._v(t._s(t.p.OtherContact))])]):t._e()])]):t._e()},k=[],I={name:"FeatureInfo",data:function(){return{feature:void 0,ignoreProps:["id","Longitude","Latitude","image_url"]}},computed:{p:function(){return this.feature&&this.feature.properties},imageUrl:function(){return this.p&&this.p.image_url}},created:function(){var e=this;window.app.FeatureInfo=this,b.$on("select-feature",function(t){return e.feature=t})}},$=I,S=(a("dc18"),Object(C["a"])($,O,k,!1,null,"42cd8734",null));S.options.__file="FeatureInfo.vue";var F=S.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v("Montrer:")]),e._l(e.categories,function(t){return a("div",[a("img",{staticClass:"w1 v-mid",attrs:{src:t.icon}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"c.state"}],staticClass:"headBox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.state)?e._i(t.state,null)>-1:t.state},on:{change:[function(a){var r=t.state,n=a.target,s=!!n.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);n.checked?o<0&&e.$set(t,"state",r.concat([i])):o>-1&&e.$set(t,"state",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(t,"state",s)},function(a){e.setSubCategories(t)}]}}),a("span",[e._v(e._s(t.category))]),e._l(t.subCategories,function(r){return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:r.state,expression:"s.state"}],staticClass:"subBox",attrs:{type:"checkbox",name:r.name},domProps:{checked:Array.isArray(r.state)?e._i(r.state,null)>-1:r.state},on:{change:[function(t){var a=r.state,n=t.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);n.checked?o<0&&e.$set(r,"state",a.concat([i])):o>-1&&e.$set(r,"state",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(r,"state",s)},function(a){e.setCategories(r,t)}]}}),a("label",{attrs:{for:r.name}},[e._v(e._s(r.name.slice(0,-1)))])])})],2)})],2)},j=[],A={name:"CategoryFilter",data:function(){return{categories:[{category:"Je cherche",subCategories:[{name:"Matériel médical,",state:!0},{name:"Aide pour les courses,",state:!0},{name:"Garde d'enfants,",state:!0},{name:"Aide pour les matahiapo,",state:!0},{name:"Logement,",state:!0},{name:"Linge propre,",state:!0},{name:"Autres,",state:!0}],state:!0,icon:"demand-marker.png"},{category:"Je propose",subCategories:[{name:"Matériel médical,",state:!0},{name:"Faire des courses,",state:!0},{name:"Caisse prioritaire,",state:!0},{name:"Livraison de nourriture,",state:!0},{name:"Livraison,",state:!0},{name:"Garde d’enfants,",state:!0},{name:"Aide pour les matahiapos,",state:!0},{name:"Logement,",state:!0},{name:"Linge propre,",state:!0},{name:"Autres,",state:!0}],state:!0,icon:"offer-marker.png"}]}},created:function(){window.CategoryFilter=this},methods:{filterChange:function(){b.$emit("filter-change",this.categories)},setCategories:function(e,t){var a=!0,r=!1,n=void 0;try{for(var s,i=l()(this.categories);!(a=(s=i.next()).done);a=!0){var o=s.value;o.category==t.category&&e.state&&(o.state=!0)}}catch(c){r=!0,n=c}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}this.filterChange()},setSubCategories:function(e){var t=!0,a=!1,r=void 0;try{for(var n,s=l()(this.categories);!(t=(n=s.next()).done);t=!0){var i=n.value;if(i.category==e.category){var o=!0,c=!1,u=void 0;try{for(var d,p=l()(i.subCategories);!(o=(d=p.next()).done);o=!0){var f=d.value;f.state=e.state}}catch(v){c=!0,u=v}finally{try{o||null==p.return||p.return()}finally{if(c)throw u}}}}}catch(v){a=!0,r=v}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}this.filterChange()}}},L=A,M=(a("41d0"),Object(C["a"])(L,P,j,!1,null,"0a2262a0",null));M.options.__file="CategoryFilter.vue";var U=M.exports;window.app={};var E={name:"app",components:{Map:x,FeatureInfo:F,CategoryFilter:U},data:function(){return{sidebarOpen:!0}},created:function(){var e=this;window.app.App=this,b.$on("select-feature",function(){return e.sidebarOpen=!0})},watch:{sidebarOpen:function(){this.$nextTick(function(){return window.map.resize()})}}};a("948e");var J=E,T=(a("7fad"),a("b0a0"),Object(C["a"])(J,n,s,!1,null,"500fd3cd",null));T.options.__file="App.vue";var z=T.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(z)}}).$mount("#app")},"7fad":function(e,t,a){"use strict";var r=a("1317"),n=a.n(r);n.a},b0a0:function(e,t,a){"use strict";var r=a("07bb"),n=a.n(r);n.a},dc18:function(e,t,a){"use strict";var r=a("e53f"),n=a.n(r);n.a},e53f:function(e,t,a){},eb91:function(e,t,a){}});
//# sourceMappingURL=app.5c2a423d.js.map